= Reader

Readers are logged-in visitors to whom you or your extensions can grant privileges. They don't see the admin interface: this is a way to control access to pages and extended functionality on the public site, not in radiant proper. A person can have both user and reader logins, and an administrator may find it useful to do just that.

With this extension you get a simple but complete machinery of registration, login and user-management (by the admin and by the users themselves). It includes input validation, email address confirmation and password reset functionality. An email address honeypot box should prevent spam signups, and a bit of glue code means that your existing user accounts become reader accounts when they need to.

This isn't much use by itself but it provides a common core for more interesting added functionality: see spanner's Forum extension for discussions and page/blog comments, Groups extension for proper page-access control and Downloads extension for secure (nginx-based) access-controlled file downloads. More will follow.

###Status

Should be good. Tests pass, no known issues.

###Next up

Since-you-were-here functionality for the forum and (planned) versioned extensions.

###Installation

Reader requires the spanner fork of multi_site and a couple of plugins. At the moment Ray doesn't know about this extension so you will need to do something like this:

  git submodule add git://github.com/spanner/radiant-multi-site-extension.git vendor/extensions/multi_site
  git submodule add git://github.com/spanner/radiant-reader-extension.git vendor/extensions/reader
  cd vendor/extensions/reader
    git submodule add git://github.com/bhedana/white_list.git vendor/plugins/white_list
    git submodule add git://github.com/chrislloyd/gravtastic.git vendor/plugins/gravtastic
    cd ../..
  rake radiant:extensions:reader:migrate
  rake radiant:extensions:reader:update

It's a bit of a mess I agree, but that's mostly because I've written it to work with Ray, but Ray is in a rather in-between state at the moment. In future this ought to be all you need:

  rake ray:extension:install name="multi-site" hub="spanner"
  rake rake ray:extension:install name="reader"
    
The update task will install a /stylesheets/admin/reader.css that you can ignore and a /stylesheets/reader.css that you should call from your reader layout (see below) and then improve upon.

###Configuration

Reader adds a few administrative columns to the site table: 

* reader_layout determines the layout used to present reader pages and defaults to 'Main' or the first layout it finds in that site.
* email_from_name and email_from_address determine from whom and where the administrative email sent to readers appear to come. They default to the name and email address of the owner of the site.

###Layouts

We use the share_layouts extension to wrap the layout of your public site around the pages produced by the reader extension. The details of the layout are up to you: as long as it calls <r:content /> at some point, it'll work. The reader pages also define title and breadcrumbs parts that may be useful. 

The site edit form is extended to include a drop-down with which to choose the reader layout.

###Using readers in other extensions

...is the whole point. The reader admin pages are properly registered with the AdminUI as collections of parts, so you can override them in the same way as the other admin pages.

Marking a reader as untrusted does nothing much here apart from making them go red, but we assume that in other extensions that will have some limiting effect.

I have half a dozen other extensions to publish over the next week or two. By the time I've finished doing that I should have a pretty good idea of what else to write here...

###See also

* http://github.com/spanner/radiant-multi-site-extension
* http://github.com/spanner/radiant-scoped-admin-extension
* http://github.com/spanner/radiant-forum-extension

###Bugs and comments

In lighthouse please: http://spanner.lighthouseapp.com/projects/26912-radiant-extensions 
or for little things, an email or github message is fine.

###Author and copyright

Copyright spanner ltd 2007-9.
Released under the same terms as Rails and/or Radiant.
Contact will at spanner.org

